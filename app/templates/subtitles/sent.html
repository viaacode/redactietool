{% extends 'base.html' %}

{% block header %}
{% endblock %}

{% block title %}
Redactietool - Ondertitelbestand
{% endblock %}

{% block content %}


<div class="columns">
  <div class="column">
    <h1 class="title">{{title}} titel hier</h1>
    <h2 class="subtitle pu mb-0 ml-1"><b>PID: {{pid}}</b></h2>
  </div>
</div>


<div class="columns">
  <div class="column is-half">
    <div id="player_container"></div>
    <script>
      flowplayer('#player_container', {
        token: '{{flowplayer_token}}',
        src: '{{video_url}}',
        poster: '{{keyframe}}?nocache='+Date.now(),
        subtitles:{ 
          tracks:[
            { 
              src: "/subtitles/{{vtt_file}}",
              label: "Nederlands",
              id: "Nederlands-nl",
              default: true,
              crossorigin: "anonymous" 
            }
          ]
        }
      })
    </script>
  </div>

  <div class="column is-half">

    {% if upload_cancelled %}
      <h2 class="subtitle">Bestaande ondertitels werden behouden</h2>
    {% else %}
      <h2 class="subtitle">Ondertitels en sidecar zijn verstuurd</h2>
    {% endif%}

    <table class="table is-fullwidth subtitle-upload-results">
      <tr><td>PID</td><td>{{pid}}</td></tr>
      <tr><td>Ondertitel type</td><td>{{subtitle_type}}</td></tr>
      <tr><td>Ondertitelbestand</td><td>{{srt_file}}</td></tr>

      {% if not upload_cancelled %}
        <tr><td>Sidecar xml file</td><td>{{xml_file}}</td></tr>
        <tr>
          <td colspan="2">
            Sidecar data: <br/>
            <textarea 
              class="textarea is-info" 
              placeholder="Sidecar data..." 
              cols="45"
              rows="5">{{xml_sidecar}}</textarea>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            Mediahaven response: <br/>
            <textarea 
              class="textarea is-info" 
              placeholder="Mediahaven response..." 
              cols="45"
              rows="5">{{mh_response}}</textarea>
          </td>
        </tr>
      {% endif %}

    </table>

    <div class="field is-grouped is-pulled-right">
      <div class="control">
        <a
          id="change_metadata"
          type="submit"
          class="button is-link"
          href="/edit_metadata?token={{token}}&pid={{pid}}&department={{department}}"
        >
          Metadata bewerken
        </a>
      </div>
    </div>

  </div>
</div>
<br/><br/>

{% endblock %}
